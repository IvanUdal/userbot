# üîÑ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–µ—Ä–µ–π—Ç–∏ —Å –ø—Ä–æ—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Üí –æ–¥–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ) –Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ **–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:**

- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** - –ø–∞—Ä—Å–∏–Ω–≥ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ä–∞–∑–Ω—ã–µ –º–µ—Å—Ç–∞
- **–ì–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–ª–µ—Ä—Ç—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**
```bash
cp -r userbot userbot_backup
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

### –®–∞–≥ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –ò–∑ —Å—Ç–∞—Ä–æ–≥–æ `.env` –≤ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

**–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```env
SOURCE_GROUP_ID=-1001234567890
TARGET_GROUP_ID=-1009876543210
FORWARDING_ENABLED=true
```

**–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
API_ID=your_api_id
API_HASH=your_api_hash
SESSION_NAME=userbot

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
NOTIFY_START=true
NOTIFY_STATS=true
ADMIN_CHAT_ID=-1001234567890
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

#### 1. –°–æ–∑–¥–∞–π—Ç–µ `config/sources.json`:

```json
{
  "sources": {
    "main_source": {
      "id": -1001234567890,
      "name": "–û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫",
      "type": "group",
      "enabled": true,
      "parsing_rules": {
        "parse_text": true,
        "parse_media": true,
        "parse_buttons": true,
        "parse_bots": false
      },
      "filters": {
        "keywords": [],
        "exclude_keywords": ["—Å–ø–∞–º"],
        "min_length": 0
      }
    }
  }
}
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ `config/destinations.json`:

```json
{
  "destinations": {
    "main_target": {
      "name": "–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ",
      "type": "telegram",
      "enabled": true,
      "config": {
        "chat_id": -1009876543210,
        "format": "markdown"
      },
      "processing_rules": {
        "summarize": false,
        "highlight_keywords": false,
        "add_metadata": true
      }
    }
  }
}
```

#### 3. –°–æ–∑–¥–∞–π—Ç–µ `config/pipelines.json`:

```json
{
  "pipelines": {
    "main_pipeline": {
      "name": "–û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω",
      "enabled": true,
      "source": "main_source",
      "destinations": ["main_target"],
      "processing_steps": [
        {
          "name": "basic_filtering",
          "type": "filter",
          "config": {
            "exclude_keywords": ["—Å–ø–∞–º"],
            "min_length": 0
          }
        },
        {
          "name": "basic_formatting",
          "type": "formatter",
          "config": {
            "add_timestamps": true,
            "add_source_info": true
          }
        }
      ],
      "created_at": "2024-01-01T00:00:00",
      "last_run": null,
      "total_processed": 0,
      "total_errors": 0
    }
  }
}
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –±–æ—Ç**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
pkill -f "python main.py"
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π –±–æ—Ç**
```bash
python main_pipeline.py
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É**
```bash
# –í Telegram –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É
.ping
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
```bash
.source_add news_channel -1001234567890
.source_add support_group -1009876543210
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π:
```bash
.destination_add notifications telegram {"chat_id": -100111222333}
.destination_add export_file file {"format": "json", "path": "./data/exports/"}
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤:
```bash
.pipeline_create news_monitoring news_channel notifications
.pipeline_create support_tracking support_group export_file
```

#### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤:
```bash
.pipelines_start_all
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/pipelines.json`:

```json
{
  "processing_steps": [
    {
      "name": "keyword_filtering",
      "type": "filter",
      "config": {
        "keywords": ["–≤–∞–∂–Ω–æ", "—Å—Ä–æ—á–Ω–æ"],
        "exclude_keywords": ["—Å–ø–∞–º", "—Ä–µ–∫–ª–∞–º–∞"],
        "min_length": 10
      }
    }
  ]
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

```json
{
  "processing_steps": [
    {
      "name": "priority_classification",
      "type": "classifier",
      "config": {
        "urgency_keywords": ["—Å—Ä–æ—á–Ω–æ", "–∫—Ä–∏—Ç–∏—á–Ω–æ"],
        "priority_levels": ["low", "medium", "high", "critical"]
      }
    }
  ]
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
```bash
.destination_add analytics_db database {"connection_string": "postgresql://user:pass@localhost/analytics"}
```

#### Elasticsearch:
```bash
.destination_add elasticsearch elasticsearch {"hosts": ["localhost:9200"], "index": "telegram_messages"}
```

#### Webhook:
```bash
.destination_add webhook webhook {"url": "https://api.example.com/webhook", "method": "POST"}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
.status                    # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
.pipelines_list           # –°–ø–∏—Å–æ–∫ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
.sources_list             # –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
.destinations_list        # –°–ø–∏—Å–æ–∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```bash
.pipeline_status main_pipeline  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
.stats_export all_pipelines    # –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É
.source_add test_source -1001234567890
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
.destination_add test_dest telegram {"chat_id": -100111222333}
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–∞–π–ø–ª–∞–π–Ω –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–∞–π–ø–ª–∞–π–Ω–∞
.pipeline_status <pipeline_name>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω
.pipelines_stop_all
.pipelines_start_all
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/pipelines.json`:

```json
{
  "pipelines": {
    "parallel_pipeline": {
      "name": "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
      "enabled": true,
      "source": "main_source",
      "destinations": ["dest1", "dest2", "dest3"],
      "processing_steps": [
        {
          "name": "parallel_processing",
          "type": "parallel",
          "config": {
            "max_workers": 4,
            "batch_size": 100
          }
        }
      ]
    }
  }
}
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

```json
{
  "processing_steps": [
    {
      "name": "caching",
      "type": "cache",
      "config": {
        "cache_enabled": true,
        "cache_ttl": 3600,
        "cache_size": 1000
      }
    }
  ]
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```json
{
  "destinations": {
    "secure_db": {
      "name": "–ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ë–î",
      "type": "database",
      "enabled": true,
      "config": {
        "connection_string": "postgresql://user:pass@localhost/secure_db",
        "encryption": {
          "enabled": true,
          "algorithm": "AES-256",
          "key": "your_encryption_key"
        }
      }
    }
  }
}
```

### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```json
{
  "sources": {
    "private_group": {
      "id": -1001234567890,
      "name": "–ü—Ä–∏–≤–∞—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞",
      "type": "group",
      "enabled": true,
      "access_control": {
        "require_member": true,
        "allowed_users": [123456789, 987654321]
      }
    }
  }
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [PIPELINE_ARCHITECTURE_GUIDE.md](./PIPELINE_ARCHITECTURE_GUIDE.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- [ARCHITECTURE_GUIDE.md](./ARCHITECTURE_GUIDE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [config_example.py](./config_example.py) - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `tail -f logs/userbot.log`
2. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º**
4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**

–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä–æ–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ Telegram Userbot –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞. 